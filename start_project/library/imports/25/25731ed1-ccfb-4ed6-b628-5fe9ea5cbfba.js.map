{"version":3,"sources":["assets\\02.Script\\Game.js"],"names":["cc","Class","Component","properties","starPrefab","Prefab","player","Node","scoreDisplay","Label","scoreAudio","type","AudioClip","onLoad","starDuration","score","director","getScheduler","schedule","spawnNewStar","newStar","instantiate","node","addChild","setPosition","getNewStarPosition","getComponent","game","maxY","height","randY","getRandom","maxX","width","randX","v2","min","max","Math","round","random","gainScore","string","audioEngine","playEffect"],"mappings":";;;;;;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,UAAU,EAAEJ,EAAE,CAACK,MADP;AAERC,IAAAA,MAAM,EAAEN,EAAE,CAACO,IAFH;AAGRC,IAAAA,YAAY,EAAER,EAAE,CAACS,KAHT;AAIRC,IAAAA,UAAU,EAAE;AACRC,MAAAA,IAAI,EAAEX,EAAE,CAACY,SADD;AAER,iBAAS;AAFD;AAJJ,GAHP;AAcLC,EAAAA,MAAM,EAAE,kBAAY;AAChB;AACA,SAAKC,YAAL,GAAoB,GAApB,CAFgB,CAGhB;;AACA,SAAKC,KAAL,GAAa,CAAb,CAJgB,CAKhB;;AACAf,IAAAA,EAAE,CAACgB,QAAH,CAAYC,YAAZ,GAA2BC,QAA3B,CAAoC,KAAKC,YAAzC,EAAuD,IAAvD,EAA6D,KAAKL,YAAlE;AACH,GArBI;AAwBLK,EAAAA,YAAY,EAAE,wBAAW;AACrB;AACA,QAAIC,OAAO,GAAGpB,EAAE,CAACqB,WAAH,CAAe,KAAKjB,UAApB,CAAd,CAFqB,CAGrB;;AACA,SAAKkB,IAAL,CAAUC,QAAV,CAAmBH,OAAnB,EAJqB,CAKrB;;AACAA,IAAAA,OAAO,CAACI,WAAR,CAAoB,KAAKC,kBAAL,EAApB,EANqB,CAOrB;;AACAL,IAAAA,OAAO,CAACM,YAAR,CAAqB,MAArB,EAA6BC,IAA7B,GAAoC,IAApC;AACH,GAjCI;AAmCLF,EAAAA,kBAAkB,EAAE,8BAAW;AAE3B;AACA,QAAIG,IAAI,GAAG,KAAKN,IAAL,CAAUO,MAAV,GAAmB,CAA9B;AACA,QAAIC,KAAK,GAAG,KAAKC,SAAL,CAAe,CAAf,EAAkBH,IAAlB,IAA0B,EAAtC,CAJ2B,CAK3B;;AACA,QAAII,IAAI,GAAG,KAAKV,IAAL,CAAUW,KAAV,GAAkB,EAA7B;AACA,QAAIC,KAAK,GAAG,KAAKH,SAAL,CAAe,CAAf,EAAkBC,IAAlB,IAA0B,GAAtC,CAP2B,CAQ3B;;AACA,WAAOhC,EAAE,CAACmC,EAAH,CAAMD,KAAN,EAAaJ,KAAb,CAAP;AACH,GA7CI;AA+CLC,EAAAA,SAAS,EAAE,mBAAUK,GAAV,EAAeC,GAAf,EAAoB;AAC3B,WAAOC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAiBH,GAAG,GAAGD,GAAvB,IAA8BA,GAAzC,CAAP;AACH,GAjDI;AAmDLK,EAAAA,SAAS,EAAE,qBAAY;AACnB,SAAK1B,KAAL,IAAc,CAAd,CADmB,CAEnB;;AACA,SAAKP,YAAL,CAAkBkC,MAAlB,GAA2B,YAAY,KAAK3B,KAA5C,CAHmB,CAInB;;AACAf,IAAAA,EAAE,CAAC2C,WAAH,CAAeC,UAAf,CAA0B,KAAKlC,UAA/B,EAA2C,KAA3C;AACH;AAzDI,CAAT","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        starPrefab: cc.Prefab,\r\n        player: cc.Node, \r\n        scoreDisplay: cc.Label,\r\n        scoreAudio: {\r\n            type: cc.AudioClip,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n\r\n    onLoad: function () {\r\n        // 별의 지속시간 설정\r\n        this.starDuration = 3.0;\r\n        // 득점 초기화\r\n        this.score = 0; \r\n        // 새로운 별 계속 생성 - 별의 지속시간 참조 \r\n        cc.director.getScheduler().schedule(this.spawnNewStar, this, this.starDuration);\r\n    },\r\n\r\n\r\n    spawnNewStar: function() {\r\n        // Prefab을 사용하여 새 노드 생성\r\n        var newStar = cc.instantiate(this.starPrefab);\r\n        // Canvas 노드 아래에 새 노드를 추가\r\n        this.node.addChild(newStar);\r\n        // 별에 대한 임의의 위치를 설정\r\n        newStar.setPosition(this.getNewStarPosition());\r\n        // 스타 컴포넌트에서 게임 오브젝트에 대한 참조 설정 : 변수(game) 생성하고 세팅\r\n        newStar.getComponent('Star').game = this;\r\n    },\r\n\r\n    getNewStarPosition: function() {\r\n\r\n        // 별의 y좌표 임의로 가져오기 : 지면보다 높게, Canvas의 높이보다 아래로\r\n        var maxY = this.node.height / 2 ;\r\n        var randY = this.getRandom(0, maxY) - 60;\r\n        // 화면 너비에 따라 별의 x 좌표 임의로 가져오기\r\n        var maxX = this.node.width - 60;\r\n        var randX = this.getRandom(0, maxX) - 450;\r\n        // 별 좌표 반환\r\n        return cc.v2(randX, randY);\r\n    },\r\n\r\n    getRandom: function (min, max) {\r\n        return Math.round(Math.random() * (max - min) + min);\r\n    },\r\n\r\n    gainScore: function () {\r\n        this.score += 1;\r\n        // 점수 갱신\r\n        this.scoreDisplay.string = 'Score: ' + this.score;\r\n        // 스코어 사운드 재생\r\n        cc.audioEngine.playEffect(this.scoreAudio, false);\r\n    },\r\n});\r\n"]}