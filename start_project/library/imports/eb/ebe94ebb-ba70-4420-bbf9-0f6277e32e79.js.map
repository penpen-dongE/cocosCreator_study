{"version":3,"sources":["assets\\02.Script\\Player.js"],"names":["cc","Class","Component","properties","jumpAudio","type","AudioClip","onLoad","accLeft","accRight","moveSpeed","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","doJumpAction","onDestroy","off","jumpUp","moveBy","v2","jumpDown","callback","callFunc","playJumpSound","rep","repeatForever","sequence","node","runAction","audioEngine","playEffect","event","keyCode","macro","KEY","a","d","update","dt","x"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        jumpAudio: {    // 점프 소리\r\n            type: cc.AudioClip,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n    onLoad: function () {\r\n        this.accLeft = false,\r\n        this.accRight = false,\r\n        this.moveSpeed = 0;\r\n\r\n        // 키보드 입력 이벤트 모니터링 등록\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n\r\n        // 시작과 동시에 주인공 점프 동작\r\n        this.doJumpAction();\r\n    },\r\n\r\n    onDestroy() {\r\n        // 키보드 입력 이벤트 모니터링 삭제\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    },\r\n\r\n    doJumpAction: function() {\r\n        // 점프 액션\r\n        var jumpUp = cc.moveBy(0.4, cc.v2(0, 300));\r\n        var jumpDown = cc.moveBy(0.4, cc.v2(0, -300));\r\n        var callback = cc.callFunc(this.playJumpSound, this);\r\n        // 무한 반복 - 착륙 후 소리를 재생 콜백 호출\r\n        var rep = cc.repeatForever(cc.sequence(jumpUp, jumpDown,callback));\r\n\r\n        this.node.runAction(rep);\r\n    },\r\n\r\n    playJumpSound: function() {\r\n        // 사운드 엔진을 호출하여 사운드 재생\r\n        cc.audioEngine.playEffect(this.jumpAudio, false);\r\n    },\r\n\r\n    onKeyDown: function(event) {\r\n        // 좌, 우 이동키 감지 시작\r\n        switch(event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.accLeft = true;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight = true;\r\n                break;\r\n        }\r\n    },\r\n\r\n    onKeyUp: function(event) {\r\n        // 좌, 우 이동키 감지 끝\r\n        switch(event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.accLeft = false;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight = false;\r\n                break;\r\n        }\r\n    },\r\n\r\n    update: function (dt) {\r\n        // 현재 이동 방향에 따라 속도 변경\r\n        if (this.accLeft){\r\n            this.moveSpeed = -150;\r\n        } else if (this.accRight) {\r\n            this.moveSpeed = 150;\r\n        }\r\n\r\n        // 주인공의 위치 업데이트\r\n        this.node.x += this.moveSpeed * dt;\r\n\r\n        // 주인공이 화면(캔버스) 바깥으로 나가지 않게 조정\r\n        if (this.node.x < -480) {\r\n            this.node.x = -480\r\n        }\r\n        if (this.node.x > 480) {\r\n            this.node.x = 480\r\n        }\r\n    },\r\n});\r\n"]}